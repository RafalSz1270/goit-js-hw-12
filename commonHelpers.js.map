{"version":3,"file":"commonHelpers.js","sources":["../src/js/script.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '45026380-4529b8f9b335b30238156ee8d';\nconst searchForm = document.querySelector('.search-form');\nconst searchQueryInput = document.getElementById('searchQuery');\nconst searchButton = document.getElementById('searchButton');\nconst gallery = document.getElementById('gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.getElementById('loadMore');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nconst fetchImages = async (query, page) => {\n  loader.style.display = 'block';\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 40\n      }\n    });\n      totalHits = response.data.totalHits;\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again later.'\n    });\n  } finally {\n    loader.style.display = 'none';\n  }\n};\n\nconst displayImages = (images) => {\n    if (images.length === 0 && currentPage === 1) {\n        iziToast.info({\n            title: 'Info',\n            message: 'Sorry, there are no images matching your search query. Please try again!'\n        });\n        return;\n    }\n\n    const imageItems = images.map(image => {\n        return `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n        <img class=\"picture\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <p>Likes: ${image.likes} Views: ${image.views} Comments: ${image.comments} Downloads: ${image.downloads}</p>\n      </a>\n    `;\n    }).join('');\n\n    gallery.insertAdjacentHTML('beforeend', imageItems);\n    new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 }).refresh();\n\n    if (images.length > 0 && gallery.children.length < totalHits) {\n        loadMoreButton.style.display = 'block';\n    } else {\n        loadMoreButton.style.display = 'none';\n        if (gallery.children.length >= totalHits) {\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n    }\n    const galleryItemHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryItemHeight * 2,\n      behavior: 'smooth'\n    });\n};\n\n\n\nconst clearGallery = () => {\n  gallery.innerHTML = '';\n  loadMoreButton.style.display = 'none';\n};\n\nsearchButton.addEventListener('click', async () => {\n  currentQuery = searchQueryInput.value.trim();\n  if (!currentQuery) {\n    clearGallery();\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query.'\n    });\n    return;\n  }\n  currentPage = 1;\n  clearGallery();\n  const images = await fetchImages(currentQuery, currentPage);\n  displayImages(images);\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n  const images = await fetchImages(currentQuery, currentPage);\n  displayImages(images);\n});\n"],"names":["API_KEY","searchQueryInput","searchButton","gallery","loader","loadMoreButton","currentPage","currentQuery","totalHits","fetchImages","query","page","response","axios","error","iziToast","displayImages","images","imageItems","image","SimpleLightbox","galleryItemHeight","clearGallery"],"mappings":"kHAMA,MAAMA,EAAU,qCACG,SAAS,cAAc,cAAc,EACxD,MAAMC,EAAmB,SAAS,eAAe,aAAa,EACxDC,EAAe,SAAS,eAAe,cAAc,EACrDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,eAAe,UAAU,EAEzD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhB,MAAMC,EAAc,MAAOC,EAAOC,IAAS,CACzCP,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAMQ,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKb,EACL,EAAGU,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,EACC,OAAAH,EAAYI,EAAS,KAAK,UACrBA,EAAS,KAAK,IACtB,OAAQE,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,iDACf,CAAK,CACL,QAAY,CACRX,EAAO,MAAM,QAAU,MACxB,CACH,EAEMY,EAAiBC,GAAW,CAC9B,GAAIA,EAAO,SAAW,GAAKX,IAAgB,EAAG,CAC1CS,EAAS,KAAK,CACV,MAAO,OACP,QAAS,0EACrB,CAAS,EACD,MACH,CAED,MAAMG,EAAaD,EAAO,IAAIE,GACnB;AAAA,iBACEA,EAAM,aAAa;AAAA,oCACAA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA,oBACtDA,EAAM,KAAK,WAAWA,EAAM,KAAK,cAAcA,EAAM,QAAQ,eAAeA,EAAM,SAAS;AAAA;AAAA,KAG1G,EAAE,KAAK,EAAE,EAEVhB,EAAQ,mBAAmB,YAAae,CAAU,EAClD,IAAIE,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAAE,UAEzEH,EAAO,OAAS,GAAKd,EAAQ,SAAS,OAASK,EAC/CH,EAAe,MAAM,QAAU,SAE/BA,EAAe,MAAM,QAAU,OAC3BF,EAAQ,SAAS,QAAUK,GAC3BO,EAAS,KAAK,CACV,MAAO,OACP,QAAS,4DACzB,CAAa,GAGT,MAAMM,EAAoB,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAC1F,OAAO,SAAS,CACd,IAAKA,EAAoB,EACzB,SAAU,QAChB,CAAK,CACL,EAIMC,EAAe,IAAM,CACzBnB,EAAQ,UAAY,GACpBE,EAAe,MAAM,QAAU,MACjC,EAEAH,EAAa,iBAAiB,QAAS,SAAY,CAEjD,GADAK,EAAeN,EAAiB,MAAM,OAClC,CAACM,EAAc,CACjBe,IACAP,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACf,CAAK,EACD,MACD,CACDT,EAAc,EACdgB,IACA,MAAML,EAAS,MAAMR,EAAYF,EAAcD,CAAW,EAC1DU,EAAcC,CAAM,CACtB,CAAC,EAEDZ,EAAe,iBAAiB,QAAS,SAAY,CACnDC,GAAe,EACf,MAAMW,EAAS,MAAMR,EAAYF,EAAcD,CAAW,EAC1DU,EAAcC,CAAM,CACtB,CAAC"}